In this first episode, we will take a look at how the android build system works, and learn the basics of gradle. We'll start with gradle's build phases, talk about AGP's configuration options can help customize your build, and what to do in order to keep your build efficient. Understanding how the build phrases work and how to configure the android gradle plugin can help you customize your build according to your project's needs.

Let's switch to android studio and see how the build system works. Gradle is a general purpose-built automation tool. While you can use gradle to build your android project, you can actually use gradle to build any types of software. Gradle supports single or mulitple project builds. To configure your project to work with gradle, you need to add a gradle file in the project folder. In a multi-project hierarchy, the root project consists of a gradle file, which lists other projects included in the builds. Android uses multi-project builds to help you modularize your app. Gradle is able to work with different types of projects, such as android or java, because of plugins. These plugins come with predefined functionality to configure and build a specific type of project. For example, to build an android project, you need to configure your `build.gradle` file with android gradle plugin. The android gradle plugin knows how to build and package an android project, no matter whether it's an app or a library.


Gradle's build process revolves around work units called tasks. You can see the list of tasks by using the terminal or enabling the task list in gradle pane in androind studio. These tasks receive inputs, take actions to perform some work, and produce outputs as a result of actions they performed. The android gradle plugin defines its own tasks and knows in which order these tasks needs to run to build an android project. A gradle build file consists of different parts. The configuration syntax is called Gradle DSL, and defines a way for developers to configure plugins. Gradle parses the android cell block in the `build.gradle` file and creates AGP DSL objects, such as application extension and build type. A typical android project has a top-level `build.gradle` file. Each module in an android project has a separate `build.gradle` file. In this project, I have a single app module. In the module level `build.gradle` file, I need to declare and apply the plugins needed to build the project. To tell Gradle that I'm building an android project, I need to apply `com.android.application`or`com.android.library`plugin. These plugins define how to configure or build an android application or library, respectively. In this case, I'm building an android app project, I need to apply`com.android.application`plugin. In the sample, the`kotlin-android` plugin is also applied since I'll be using kotlin.


Android Gradle plugin provides its own DSL that you can use to configure it, and makes this configuration available to tasks during the build. To configure the android gradle plugin, you need to use the `android{}` block. In this block, you can define sdk in two versions, application details and other configurations for different build types, such as debug or release. If you want to learn more on how Gradle uses this information to create variants and what other options are available to you, check out the build documentation linked in the notes below. 


In the next section, you can define dependencies. Gradle dependency management supports Maven and IP compatible repositories as well as local binaries from the file system. You can easily convert the syntax of a Maven dependency to Gradle. 


Let's see what happens behide the scene when I execute a task. Gradle evaluates and runs the build in three phases: initialization, configuration and execution. In the initialization phase, Gradle decides which projects are included in the build and creates a project instance for each of these projects. To decide which projects are included in the build, Gradle firsts looks for the `settings.gradle` file to decide between a single project or multi project builds. In the configuration phase, Gradle evaluates all build scripts for the project included in the build, applies plugins, configures the build using the cell object and finally registers their tasks as well as their inputs lazily. Note that the configuration phase runs regardless of which task is requested to run. To keep your builds short and efficient, avoid performing any time-consuming operations in the configuration phase. Finally, in the execution phase, Gradle executes the set of tasks needed for the build. We'll take a closer look at these phases in the next episode, while writing our own plugin.


Gradle DSL supports Groovy and Kotlin scripts for build files. So far, I used Groovy DSL scripts to configure this project build. You can see the same build file here in Kotlin and in Groovy script side by side. Notice the file name for the Kotlin script has kt as suffix. Moving from Groovy to Kotlin, or the other way doesn't change how you execute a task.
